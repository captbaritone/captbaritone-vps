###############################################################################
# HTTP (port 80) vhosts for JordanEldredge.com domain
#
# WHY THIS FILE EXISTS:
#   - Let’s Encrypt’s standard http-01 challenge requires each domain to be
#     reachable over plain HTTP on port 80.
#   - We intentionally DO NOT proxy any traffic here; these vhosts only exist
#     so Certbot can place and serve ACME challenge files.
#   - The real application traffic is served *only* on HTTPS (port 443), where
#     all reverse-proxying is configured.
#
# These vhosts expose nothing except a tiny placeholder DocumentRoot. Users who
# visit http://<domain> will see a benign placeholder page. HTTPS traffic is
# handled entirely in the corresponding :443 vhosts.
###############################################################################

<VirtualHost *:80>
    ServerName jordaneldredge.com
    ServerAlias www.jordaneldredge.com

    DocumentRoot /home/captbaritone/projects/jordaneldredge.com/public_html

    ErrorLog ${APACHE_LOG_DIR}/jordaneldredge-error.log
    CustomLog ${APACHE_LOG_DIR}/jordaneldredge-access.log vhost_combined

    <Directory /home/captbaritone/projects/jordaneldredge.com/public_html>
        Options Indexes FollowSymLinks
        AllowOverride All
        Require all granted
        Options -Indexes
    </Directory>
RewriteEngine on
RewriteCond %{SERVER_NAME} =jordaneldredge.com [OR]
RewriteCond %{SERVER_NAME} =www.jordaneldredge.com
RewriteRule ^ https://%{SERVER_NAME}%{REQUEST_URI} [END,NE,R=permanent]
</VirtualHost>
