<IfModule mod_ssl.c>
<VirtualHost *:443>
    ServerName jordaneldredge.com
    ServerAlias www.jordaneldredge.com

    DocumentRoot /home/captbaritone/projects/jordaneldredge.com/public_html

    ErrorLog ${APACHE_LOG_DIR}/jordaneldredge-error.log
    CustomLog ${APACHE_LOG_DIR}/jordaneldredge-access.log vhost_combined

    <Directory /home/captbaritone/projects/jordaneldredge.com/public_html>
        Options Indexes FollowSymLinks
        AllowOverride All
        Require all granted
        Options -Indexes
    </Directory>

    # --- REVERSE PROXY SETUP FOR NEXT.JS ---
    ProxyPreserveHost On
    ProxyRequests Off

    # These paths are NOT proxied â€” serve from DocumentRoot
    ProxyPass        /projects/landing-pages/        !
    ProxyPass        /projects/ukulele-chords/       !
    ProxyPass        /projects/create-object-url/    !

    # Everything else goes to your Next.js server
    ProxyPass        /  http://127.0.0.1:4000/
    ProxyPassReverse /  http://127.0.0.1:4000/

    Include /etc/letsencrypt/options-ssl-apache.conf
    SSLCertificateFile /etc/letsencrypt/live/jordaneldredge.com/fullchain.pem
    SSLCertificateKeyFile /etc/letsencrypt/live/jordaneldredge.com/privkey.pem
</VirtualHost>
</IfModule>
